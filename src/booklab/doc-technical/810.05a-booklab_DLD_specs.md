<a id="booklab"></a>

# booklab

**booklab** main python package for Booklab system

Consists of the following basic modules:
- `booklab-cli` which is a CLI application to manage system
- `booklabd` designed to serve `/api/.../` system routes that need database write access
Despite these Python modules, there are other directories in package, the most relevant being:
- `data/` containing the system data in JSON files
- `conf/` containing configuration files for different system components including infrastructure ones like gunicorn or nginx
- `doc/` containing system usage documentation (aka api interface)

Author: Petre Iordanescu (petre.iordanescu@gmail.com)
Last update: aug.2025

<a id="booklab.DATA_ROOT"></a>

#### DATA\_ROOT

database files directory

<a id="booklab.CONF_ROOT"></a>

#### CONF\_ROOT

config files directory

<a id="booklab.gunicorn.conf"></a>

# booklab.gunicorn.conf

<a id="booklab.conf"></a>

# booklab.conf

**conf** - configurations module
Various booklab system components configuration files.
- _Note 1:_ files wirh `.py` extension are considered Python files and can be imported accordingly as longas they are Python-code correct.
- _Note 2:_ all files from here are assumed to be _text files_. Any deviation from this rule is assumed to be treated accordingly in code.

Author; Petre Iordanescu (petre.iordanescu@gmail.com)
Created; Aug.2025

<a id="booklab.conf.gunicorn.gunicorn.conf"></a>

# booklab.conf.gunicorn.gunicorn.conf

<a id="booklab.booklab-cli"></a>

# booklab.booklab-cli

**booklab_cli** - CLI module
CLI module to assure system operatins as command line.

Architecture; Linux standard (POSIX) CLI
Author; Petre Iordanescu (petre.iordanescu@gmail.com)
Created; Aug.2025

<a id="booklab.__version__"></a>

# booklab.\_\_version\_\_

**__version__.py** module that contains Booklab aplication version number.

NOTE: this module is imported and made "public" in `booklab._init__.py`

Author: Petre Iordanescu (petre.iordanescu@gmail.com)

<a id="booklab.booklabd.routes"></a>

# booklab.booklabd.routes

**routes** module desined to assure exposion of all `booklabd` interface as HTTP routes

Important variables:
    - `booklab.boolabd.api_app` - web application object (aka Flask.app)

Author: Petre Iordanescu (petre.iordanescu@gmail.com)

<a id="booklab.booklabd.routes.api_newb"></a>

#### api\_newb

```python
@api_app.route("/api/newb/")
def api_newb()
```

**api_newb** serve creation of newb book functionality.
Query paraneters: none

<a id="booklab.booklabd.routes.api_bstatus"></a>

#### api\_bstatus

```python
@api_app.route("/api/bstatus/")
def api_bstatus()
```

**api_bstatus** serve bstatus book functionality.
Query paraneters: book code

<a id="booklab.booklabd.routes.api_edtb"></a>

#### api\_edtb

```python
@api_app.route("/api/edtb/")
def api_edtb()
```

**api_edtb** serve edtb functionality.
Query paraneters: book code

<a id="booklab.booklabd.routes.api_orgm"></a>

#### api\_orgm

```python
@api_app.route("/api/orgm/")
def api_orgm()
```

**api_orgm** serve  orgm book functionality.
Query paraneters: book code

<a id="booklab.booklabd.routes.api_prvb"></a>

#### api\_prvb

```python
@api_app.route("/api/prvb/")
def api_prvb()
```

**api_prvb** serve prvb book functionality.
Query paraneters: book code

<a id="booklab.booklabd.routes.api_dplb"></a>

#### api\_dplb

```python
@api_app.route("/api/dplb/")
def api_dplb()
```

**api_dplb** serve dplb book functionality.
Query paraneters: book code

<a id="booklab.booklabd.routes.api_bcat"></a>

#### api\_bcat

```python
@api_app.route("/api/bcat/")
def api_bcat()
```

**api_bcat** serve accessing books catalog functionality.

<a id="booklab.booklabd.routes.test"></a>

#### test

```python
@api_app.route("/")
@api_app.route("/<path:any_path>/")
def test(any_path: str = ...) -> str
```

**static_site** serve routes of static sote `/docs/...`

This function serve Booklab static site from booklabd server. 
This is provided to assure a right integration between pure _static site component_ which is the main entry in Booklab application and
and _dynamic site (api) component_ which deserve those pages the need to write on server (usually database files) - non GET routes which are starting with `/api/...` explicitelly defined in this component (routes.py file).

Return from this function vary depending on `any_path` value:
- if "" or None then the static site will be addressed
- for any other value that will be shown in a small HTML foe debugging purposrs

<a id="booklab.booklabd.app_init"></a>

# booklab.booklabd.app\_init

**app_init** module that initialize `booklabd` application

This module is designed to initialize the main web application object `api_app`.

Author: Petre Iordanescu (petre.iordanescu@gmail.com)

<a id="booklab.booklabd.app_init.init_app"></a>

#### init\_app

```python
def init_app(app_name: str, static_site_dir: str, templates_dir: str,
             pjroot_location: str) -> Flask
```

Create Flask application object and return it

**Arguments**:

  
- ``app_name`` - name of web application objwcr
- ``static_site_dir`` - directory used by Flask app to render Jinja templates
- ``templates_dir`` - directory name where templates are to becfound (relative to pjroot_location)
- ``pjroot_location`` - project root directory (relative to pjroot_location)
  

**Returns**:

  
  web application object

<a id="booklab.booklabd"></a>

# booklab.booklabd

booklabd - Booklab API server module

Main functionalities:
* operate JSON database file
* provide necessary http routes

Architecture; HTTP REST
Author: Petre Iordanescu (petre.iordanescu@gmail.com)
Created; 21-Aug-2025

<a id="booklab.booklabd.db_init"></a>

# booklab.booklabd.db\_init

**db_init** module that initialize `booklabd` database (more JSON files)

This module is designed to initialize database objects `db_books` and `db_system`.

Author: Petre Iordanescu (petre.iordanescu@gmail.com)
Created: Sep.2025

<a id="booklab.booklabd.db_init.init_db"></a>

#### init\_db

```python
def init_db() -> tuple[pysondb]
```

Create db_books, db_system objects and return them as tuple

**Returns**:

  
  `(db_books, db_system)` tuple of pysondb object

<a id="booklab.old-misc-files.book_tmpl.bkcmd_gen_final_book"></a>

# booklab.old-misc-files.book\_tmpl.bkcmd\_gen\_final\_book

<a id="booklab.old-misc-files.book_tmpl.bkcmd_start_book_preview"></a>

# booklab.old-misc-files.book\_tmpl.bkcmd\_start\_book\_preview

<a id="booklab.old-misc-files.book_tmpl"></a>

# booklab.old-misc-files.book\_tmpl

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file"></a>

# booklab.old-misc-files.book\_tmpl.bkcmd\_render\_cfg\_file

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.my_name"></a>

#### my\_name

use `__file__` attribute which guarantees the full pth-and-name of current python file (ATTN if is in a library !)

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.my_crt_dir"></a>

#### my\_crt\_dir

normally this should be the site root directory (in production `docs/` & in dev `doc_src/`)

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.splitted_my_real_dir"></a>

#### splitted\_my\_real\_dir

split directory path in its parts

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.book_directory_name"></a>

#### book\_directory\_name

get last list entry as being the book name where intend to obtain the book code (book dir name format: book_<code>)

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.book_database_code"></a>

#### book\_database\_code

keep only characters after `book_`, sufix name of directory ((book dir name format: book_<code>))

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.bcat_records"></a>

#### bcat\_records

will return a list with all recorsd but allways keep only the first one as `code` key is UNIQUE

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.bcat_records"></a>

#### bcat\_records

keep only the first one as `code` key is UNIQUE

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.templates_root"></a>

#### templates\_root

directory where the file is that need to be renderend (book_mkdocs.yml)

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.source_config_file"></a>

#### source\_config\_file

source file (JINJA)

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.destination_config_file"></a>

#### destination\_config\_file

destination file (YAML)

<a id="booklab.old-misc-files.book_tmpl.bkcmd_render_cfg_file.bcat_jinja_tmpl"></a>

#### bcat\_jinja\_tmpl

load read file content as template

<a id="booklab.old-misc-files.cgi-bin.bcat"></a>

# booklab.old-misc-files.cgi-bin.bcat

<a id="booklab.old-misc-files.cgi-bin.bcat.my_crt_dir"></a>

#### my\_crt\_dir

normally this should be the site root directory (in production `docs/` & in dev `doc_src/`)

<a id="booklab.old-misc-files.cgi-bin.bcat.bcat_jinja_tmpl"></a>

#### bcat\_jinja\_tmpl

load read file content as template

<a id="booklab.old-misc-files.cgi-bin"></a>

# booklab.old-misc-files.cgi-bin

<a id="booklab.old-misc-files.cgi-bin.bkcmd_new_book"></a>

# booklab.old-misc-files.cgi-bin.bkcmd\_new\_book

<a id="booklab.old-misc-files.cgi-bin.python_model"></a>

# booklab.old-misc-files.cgi-bin.python\_model

<a id="booklab.old-misc-files.cgi-bin.python_model.my_module_name"></a>

#### my\_module\_name

the module name

<a id="booklab.old-misc-files.cgi-bin.python_model.my_name"></a>

#### my\_name

use `__file__` attribute which guarantees the full pth-and-name of current python file (ATTN if is in a library !)

<a id="booklab.old-misc-files.cgi-bin.python_model.my_crt_dir"></a>

#### my\_crt\_dir

normally this should be the site root directory (in production `docs/` & in dev `doc_src/`)

<a id="booklab.old-misc-files.cgi-bin.python_model.splitted_my_real_dir"></a>

#### splitted\_my\_real\_dir

split directory path in its parts

<a id="booklab.old-misc-files.cgi-bin.python_model.book_directory_name"></a>

#### book\_directory\_name

get last list entry as being the book name where intend to obtain the book code (book dir name format: book_<code>)

<a id="booklab.old-misc-files.cgi-bin.python_model.book_database_code"></a>

#### book\_database\_code

keep only characters after `book_`, sufix name of directory ((book dir name format: book_<code>))

<a id="booklab.old-misc-files.cgi-bin.whoami"></a>

# booklab.old-misc-files.cgi-bin.whoami

<a id="booklab.__main__"></a>

# booklab.\_\_main\_\_

... wip ...
modules to be launched at package call with `-m` option

<a id="booklab.data"></a>

# booklab.data

**data** component contains the application database as JSON files:

* a books database (`books_catalog.json`) containing all created books and detailed information about each one
* a system database (`app_info.json`) containing information about installed application

